%% This is file `elsarticle-template-1-num.tex',
%%
%% Copyright 2009 Elsevier Ltd
%%
%% This file is part of the 'Elsarticle Bundle'.
%% ---------------------------------------------
%%
%% It may be distributed under the conditions of the LaTeX Project Public
%% License, either version 1.2 of this license or (at your option) any
%% later version.  The latest version of this license is in
%%    http://www.latex-project.org/lppl.txt
%% and version 1.2 or later is part of all distributions of LaTeX
%% version 1999/12/01 or later.
%%
%% The list of all files belonging to the 'Elsarticle Bundle' is
%% given in the file `manifest.txt'.
%%
%% Template article for Elsevier's document class `elsarticle'
%% with numbered style bibliographic references
%%
%% $Id: elsarticle-template-1-num.tex 149 2009-10-08 05:01:15Z rishi $
%% $URL: http://lenova.river-valley.com/svn/elsbst/trunk/elsarticle-template-1-num.tex $
%%
\documentclass[preprint,12pt]{elsarticle}

%% Use the option review to obtain double line spacing
%% \documentclass[preprint,review,12pt]{elsarticle}

%% Use the options 1p,twocolumn; 3p; 3p,twocolumn; 5p; or 5p,twocolumn
%% for a journal layout:
%% \documentclass[final,1p,times]{elsarticle}
%% \documentclass[final,1p,times,twocolumn]{elsarticle}
%% \documentclass[final,3p,times]{elsarticle}
%% \documentclass[final,3p,times,twocolumn]{elsarticle}
%% \documentclass[final,5p,times]{elsarticle}
%% \documentclass[final,5p,times,twocolumn]{elsarticle}

%% if you use PostScript figures in your article
%% use the graphics package for simple commands
%% \usepackage{graphics}
%% or use the graphicx package for more complicated commands
%% \usepackage{graphicx}
%% or use the epsfig package if you prefer to use the old commands
%% \usepackage{epsfig}

%% The amssymb package provides various useful mathematical symbols
\usepackage{amssymb}
%% The amsthm package provides extended theorem environments
%% \usepackage{amsthm}
\usepackage{hyperref} %\url can be used, links are highlited

%\usepackage[latin1]{inputenc} % Zeichencodierung
%\usepackage[T1]{fontenc} % Zeichencodierung

\usepackage[printonlyused]{acronym}

\usepackage{color}
\usepackage{xcolor}

\usepackage{listings} \lstset{numbers=left, numberstyle=\tiny,
  basicstyle=\footnotesize, stepnumber=2, numbersep=5pt,
  showspaces=false, showstringspaces=false, frame=single,
  breaklines=true,
  backgroundcolor=\color{white},morekeywords={id,gender, name,
    first_name, username, gender, locale},
  numbersep=5pt} \lstset{language=Perl} 




\newcounter{countNotes}
\newcommand{\annKB}[1]{\color{blue}*\textsuperscript{\thecountNotes}\marginpar{\color{blue} \tiny *\textsuperscript{\thecountNotes}\textbf{Note (KB): \\}
    #1  }\addtocounter{countNotes}{1}\color{black}}
%\renewcommand{\annKB}[1]{} %disable annotation 

% \renewcommand{sbw}{} %disable comments


%% The lineno packages adds line numbers. Start line numbering with
%% \begin{linenumbers}, end it with \end{linenumbers}. Or switch it on
%% for the whole article with \linenumbers after \end{frontmatter}.
%% \usepackage{lineno}

%% natbib.sty is loaded by default. However, natbib options can be
%% provided with \biboptions{...} command. Following options are
%% valid:

%%   round  -  round parentheses are used (default)
%%   square -  square brackets are used   [option]
%%   curly  -  curly braces are used      {option}
%%   angle  -  angle brackets are used    <option>
%%   semicolon  -  multiple citations separated by semi-colon
%%   colon  - same as semicolon, an earlier confusion
%%   comma  -  separated by comma
%%   numbers-  selects numerical citations
%%   super  -  numerical citations as superscripts
%%   sort   -  sorts multiple citations according to order in ref. list
%%   sort&compress   -  like sort, but also compresses numerical citations
%%   compress - compresses without sorting
%%
%% \biboptions{comma,round}

% \biboptions{}


\journal{has to be discussed}

\begin{document}

\begin{frontmatter}

%% Title, authors and addresses

%% use the tnoteref command within \title for footnotes;
%% use the tnotetext command for the associated footnote;
%% use the fnref command within \author or \address for footnotes;
%% use the fntext command for the associated footnote;
%% use the corref command within \author for corresponding author footnotes;
%% use the cortext command for the associated footnote;
%% use the ead command for the email address,
%% and the form \ead[url] for the home page:
%%
%% \title{Title\tnoteref{label1}}
%% \tnotetext[label1]{}
%% \author{Name\corref{cor1}\fnref{label2}}
%% \ead{email address}
%% \ead[url]{home page}
%% \fntext[label2]{}
%% \cortext[cor1]{}
%% \address{Address\fnref{label3}}
%% \fntext[label3]{}

\title{Spreading of a Facebook Application}

%% use optional labels to link authors explicitly to addresses:
%% \author[label1,label2]{<author name>}
%% \address[label1]{<address>}
%% \address[label2]{<address>}


\author[focal]{Kathrin Becker\corref{cor1}\fnref{fn1}} 
\ead{mail@kathrin-becker.eu}
\author[focal]{Mayutan Arumaithurai\fnref{fn1}} %
\ead{mayutan.arumaithurai@gmail.com}
\author[focal]{Xiaoming Fu\corref{cor2}\fnref{fn1}} %
\ead{fu@cs.uni-goettingen.de}

\address[focal]{Institute of Computer Science, Computer Networks (NET)
  Research Group, University of G\"ottingen}





%\cortext[cor1]{Corresponding author}
%\cortext[cor2]{Principal corresponding author}
%\fntext[fn1]{This document is a collaborative effort.}
%\fntext[fn2]{Another author footnote, but a little more longer.}
%\fntext[fn3]{Yet another author footnote. Indeed, you can have
%xany number of author footnotes.}
%\tnotetext[tn1]{This is a specimen title.}



\begin{abstract}
%% Text of abstract, 150 - 350 words
% The outcome was students' perceptions of preparedness.
Applications on Facebook are popular and attract many
people. Nevertheless, before installation people must acknowledge that an application
exists, and they must demand the application, too.
There may exist several reasons for people to install
applications, such as intensive usage within their social network or
personal interest in a special topic. Persuasion can
happen virally by Facebook's news stream, by marketing through
friends, or by directed search on 
Facebook. Differences in the spreading process are supposed to exist
for the different kinds of applications. 

This paper investigates how a quiz, asking people five randomly
selected questions about dentistry health facts, spreads on
Facebook. The quiz is endowed with a social component: After
completion participants get more than the solution solely. Instead,
users can see images of friends who could answer the questions they got correctly
underneath the solution. In addition, they are told how good their
score was in comparison to their friends. 

Analysis is supported by a tool maintaining an internal representation
of an extract of Facebook's social graph containing the participants
as nodes, their friendships as edges, and their basic information
retrieved from Facebook as well as quiz results as node
attributes. The tool allows for output of aspects of the internal graph
in DOT-language, and export of metrics to CSV, too. 

Results show that participants who connect the network of existing
users to a new one often achieved a relatively high score in the quiz. New
participants often had strong connections to the network of people who
already participated. Indeed\annSBW{passt da mal Ã¼berhaupt nicht}, the number of friends did not seem to make
users more or less likely to gather new participants for the quiz.
\end{abstract}

\begin{keyword}
%% keywords here, in the form: keyword \sep keyword

%% MSC codes here, in the form: \MSC code \sep code
%% or \MSC[2008] code \sep code (2000 is the default)
Facebook, Spreading of Applications, Social Network, data mining, social graph
\end{keyword}

\end{frontmatter}

%%

%% The Appendices part is started with the command \appendix;
%% appendix sections are then done as normal sections
%% \appendix
%% main text
%% Start line numbering here if you want
%%
%o \linenumbers

\section{Introduction}
\label{sec:introduction}
Founded in 2004, Facebook\footnote{www.facebook.com} has
become a social network currently used by more than 600 million people
all over the world\cite{facebook500}. Since 2007, Facebook provides an API permitting
third party developers to embed their own applications in
Facebook\footnote{http://developers.facebook.com/blog/archive}\annSBW{sowas kannste nicht verlinken ... wieso sind das fussnoten und keine Quellen?}.
Subsequent to the F8 conference in April, 2010, Facebook simplified
access to its social graph by allowing
external websites for integration\annSBW{falsche grammatik} in their social graph through \annSBW{the} Open
Graph Protocol\cite{facebookStats} . 

Due to integration in Facebook's social graph, third party
applications not only spare user\annSBW{s from} authentication procedures, but can also access
extracts of Facebook's social graph, too. These information provided
by Facebook detail a user's friend list, basic information, and
further data to which access has to be granted by access tokens
\footnote{http://developers.facebook.com/docs/authentication/}. Thus,
applications let Facebook's social graph enlarge and make people
spend more time of Facebook. In addition, application developers
can spread their application virally through appearance in news
streams, and collect useful information about the social network of
their users, too.

Statistics show development of Facebook applications being very
attractive nowadays. Until October, 2009, 
over 350 000 apps had been seen on Facebook \cite{facebookBlog}.
According to current statistics, about 20 million applications are
installed per day, and ten thousand new websites integrate with
Facebook every day, too. \cite{facebookStats} 

This paper investigates the process of spreading of applications on
Facebook by focusing on the show case of a quiz asking users five randomly
selected questions about dentistry health facts. User data are
collected in a MySQL database, and evaluation of the data is
accomplished by the outputs of a tool maintaining an internal representation of the extract of Facebook's
social graph the application is allowed to access.

The tool allows for output of graphs in \ac{dot} language and output of
metrics as \ac{csv}. The graphs the tool can output detail how the application
spreads, and allows for labelling of people (nodes) which connect the
network of existing user to new networks. The metrics detail with how
many people users who participated are friends, which score they had,
and to how many new people they could have spread the application.

In the first section, basic information about Facebook's social graph,
and integration of applications is
given. In the next section, the methodology is described by detailing
the quiz and its building, as well as the tool for data evaluation. Section
\ref{sec:results} presents the results, and in section
\ref{sec:discussion} and \ref{sec:outlook}, a discussed follows \annSBW{wording}. Section
\ref{sec:conclusion} concludes the paper by summing up the results,
and giving an outlook for further research, too\annSBW{loose the too}.


\section{Foundations}
\label{sec:background}
This section details concepts from Facebook, basics about the
\ac{DOT} language, and at least, it defines the metrics the tool
explained in section \ref{sec:methodology} can output. Facebook's
social graph concept is explained in 
section \ref{sec:social-graph}, section \ref{sec:integr-appl-with}
describes how applications can be integrated with Facebook, and
section \ref{sec:auth-auth} makes clear \annSBW{no it doesn't} how applications can be
integrated with Facebook.

\subsection{Social Graph}
\label{sec:social-graph}
Facebook's \textit{social graph} can be regarded as its core. It
represents connections between people and things people care about 
\cite{facebookDev}. Since April, 2010, Facebook allows for access to its
social graph via the Open Graph Protocol\footnote{http://ogp.me/}, thus facilitating
external websites and third party applications to integrate in the social graph by becoming
additional nodes\cite{facebookDev2}. These additional nodes can for
instance represent entities such as movies, news articles,
applications, and much more. People on Facebook can add connections
from their user node to these additional nodes by clicking on plugins
provided by Facebook such as \textit{Like Buttons} or entering content in \textit{Comment
  Boxes}.  \cite{facebookDev2} As images of friends who liked an
entity, and comments of friends can be shown on external websites via
iframes, aspects from a user's social network are brought to these
websites, and for this reason, Facebook is said to make the Internet social.

In general, additional nodes representing external websites are integrated
unidirectional. Thus, Facebook retrieves the information in which
entities users were interested in, while the external websites do not
gain access to Facebook's social graph. Instead, the social
information is included through iframes.
In order to integrate nodes bi-directional, the user must permit the
access, and both, the user, and the entity, which wants to gain access
to the social graph, must be authenticated. This process is detailed in
section \ref{sec:auth-auth}. This happens in case of applications on
Facebook, thus they are included bi-directional and can grab
information from Facebook's social graph.

The Graph API is one of Facebook's core concepts and presents a consistent
view of the social graph. Every object has an unique ID and if it is
public, its properties can be accessed by requesting the appropriate URL:
\url{https://graph.facebook.com/ID}. Listing \ref{list:kbecker} shows
the author's public user node on Facebook's social graph. which is
returned as a \ac{json}-object\footnote{http://www.json.org}.

\begin{lstlisting}[caption=JSON object from
  \url{https://graph.facebook.com/681178092},
  label=list:kbecker]{}
{
   "id": "681178092",
   "name": "Kathrin Becker",
   "first_name": "Kathrin",
   "last_name": "Becker",
   "username": "kathrin.becker1",
   "gender": "female",
   "locale": "de_DE"
}
\end{lstlisting}

In order to get access not only to public, but also to private
information, an access token has to be included in the Graph API
request. To get this token, the accessing entity must be
authorized and authenticated to do so. How this can be achieved is
explained in section \ref{sec:auth-auth}. When trying to access
non-public information without the needed access token, an error
is returned. Listing \ref{list:kbeckerfriends} gives an example for this.


\begin{lstlisting}[caption=JSON object from
  \url{https://graph.facebook.com/681178092/friends},
  label=list:kbeckerfriends]{}
{
   "error": {
      "type": "OAuthException",
      "message": "An access token is required to request this resource."
   }
}
\end{lstlisting}


Besides the Graph API, Facebook's social graph can also be accessed
with the REST-API, which is in the processes of deprecating
\cite{facebookDev3}. Both, the Graph API and the REST-API support
O-Auth 2.0 for authentication and authorization. O-Auth 2.0 is
included in Facebook's \ac{sdks} (see section
\ref{sec:integr-appl-with} and \ref{sec:auth-auth}).




\subsection{Integration of Applications with Facebook}
\label{sec:integr-appl-with}
Applications on Facebook are hosted on external severs, and are loaded
into a \textit{Canvas Page} by using iFrames. After registration
(\url{http://www.facebook.com/developers/createapp.php}), applications
can be found under the URL \url{http://apps.facebook.com/your_app }.
As soon as the application exists for some month and has
some users registered, it can be added to Facebook's application
index. 

Facebook provides several features to support the development
process. \ac{sdks} exist for popular programming languages and provide
sets of pre-defined functions for communication with Facebook. For
instance, they include the O-Auth 2.0 dialog which is described in
section \ref{sec:auth-auth}. In
addition, Facebook grants observation of its own development process by
making its raodmap \annSBW{typo} public, and by showcasting \annSBW{typo and wrong word (showcasing is positiv)} its buglist. In addition, a
testserver exists to help developers to analyze if their application
is going to run with planned features from Facebook. 
Facebook provides an \textit{insights}-feature which makes
statistics about the applications available. \cite{oreilly}.



\subsection{Authentication and Authorization}
\label{sec:auth-auth}
In order to authorize and authenticate, Facebook recommends usage of
O-Auth 2.0 protocol by using the OAuth Dialog included in its
\ac{sdks}. As the application analyzed in this paper and described in section 
\ref{sec:method} implements the O-Auth Dialog from the PHP-\ac{sdk},
this variant will be described in detail. It shall just be mentioned,\annSBW{ loose the comma}
that Facebook also allows for manual execution of the steps to receive
access tokens.\cite{facebookDevAuth}  

The OAuth Dialog performs three steps, i.e. user authentication, 
and authorization as well as authentication of the
application. If these three steps are completed, the application is
issued an \textit{user access token}. If more than basic information
is needed from Facebook, scope parameters can be set.\cite{facebookDevAuth}

Figure \ref{fig:authorization} details how authorization and
authentication take place with OAuthDialog. The \textit{app server}
illustrates the server on which the app is actually
running. \textit{Facebook} represents all the Facebook servers, on
which perform authentication and authorization. The \textit{OAuth
  Dialog} runs on the browser of the client who is going to use the
application.


\begin{figure}
\label{fig:authorization}
  \includegraphics[width=4in]{../img/fbinteraction3.png}
  \caption{Facebook establishes trust relation by not sending login
    data to app server, but using access tokens instead for
    data exchange with app server.}
\end{figure}

When clients access the canvas page of the application, they are
redirected to the OAuth Dialog (running on a Facebook server) and
provided with the application's ID. Then, user authentication and
app authorization is performed, by involving the client and Facebook
only. User authentication is done by logging in on Facebook (if necessary) and
authorization of the application is done by asking the user if he/she
wants to grant the application access to some data specified by the
application with the scope parameter. One should note, that \annSBW{ loose the comma} no
login data are sent to the application, thus, \annSBW{thus triffts mal garnicht, das komma is zu viel am besten ganzen satz anders} this is how Facebook
establishes a trust relation. 
If the user authorizes the application, an \textit{authorization code} is returned and
the user is redirected to the application, to which the
\textit{authorization code} is forwarded. During registration of the
application, an \textit{application secret} code was
created. In order to authenticate the application, the
\textit{authorization code} and the \textit{application secret} have
to be sent to Facebook's \textit{Graph API Token Endpoint}. Facebook
then returns an \textit{access token}, which can be included in the
URL by which the Graph API can be accessed. However, Facebook's
\ac{sdks} also provide functions to perform calls to the Graph API,
and in this case, the access token is included automatically.

\annSBW{HTTPS? Security Ã¼berlegungen?}

\subsection{Graphs with DOT language}
\label{sec:graph-repr-with}
The \ac{dot} language allows for plain text description of
graphs. There are few programs that can process \ac{dot} graphs, most \annSBW{ not by a long shot}
of them are part of the
\textit{Graphviz}\footnote{http://www.graphviz.org}-package. 
The language allows for directed and undirected graphs, attributes can
be set and colors as well as different shapes for nodes and edges can
be used. The basic syntax is very easy, the graph shown in figure
\ref{fig:dot} has the \ac{dot}-code given in listing \ref{list:dot}.

\begin{lstlisting}[caption=A very simple DOT-Graph,
  label=list:dot]{}{
 digraph myGraph {
     a -> b;
}
\end{lstlisting}

\begin{figure}
  \includegraphics[width=0.4in]{../img/ab.png}
\caption{A very simple graph in \ac{dot}-language.}
\label{fig:dot}
\end{figure}

Labels and colors can be added by defining the node in the head of the
graph description. An example is detailed in listing \ref{list:dot2}, and
the corresponding graph is given in figure \ref{fig:dot2}.


\begin{figure}
  \includegraphics[width=0.4in]{../img/graphDot.png}
\caption{A very simple graph with node a blue boxed and fontcolor set
  to red.}
\label{fig:dot2}
\end{figure}


\begin{lstlisting}[caption=A very simple DOT-Graph,
  label=list:dot2]{}{
 digraph myGraph {
a [label="Foo", color="blue", shape=box, fontcolor="red"];
     a -> b;
}
\end{lstlisting}

\subsection{Software Metrics}
\label{sec:metrics}
Metrics define a mapping of a `particular measurable entity to a
numerical value' \cite{Lanz06a}. Thus, they allow for analysis and summarization
of properties which are oftentimes not measurable\annSBW{gerad eben haste noch das gegenteil behauptet}. In addition, they
facilitate detection of `outliers in large amounts of data'
\cite{Lanz06a}. Metrics can be plotted as diagrams or charts, or they
can be used for visualizations such as graphs connecting nodes
characterized by metrics. Since humans are trained in understanding signs and
pictures, visualizations supports understanding and identifying of
`hidden aspects'. \cite{Lanz06a} In this paper, they are
employed to characterize users of the quiz. Some metrics can be output
as \ac{pdf}, and others are used to create the graphs in \ac{dot} language.

The following metrics can be calculated:

\begin{itemize}
\item A user's number of friends.
\item A user's score.
\item The number of friends who also participated in the quiz.
\item The number of friends who used the application, and belong to a
new network, thus the only connector between the new users' nodes and
the other nodes of the graph is the node of the user analyzed.
\end{itemize}


\section{Methodology}
\label{sec:method}
This section describes the methodology. At first, the quiz which is
used to collect data from Facebook's social graph is described as well
as its implementation (section \ref{sec:quiz}).
Then, it is explained how data are collected for
further analysis and how they can be evaluated.

\subsection{The Analyzed Application}
\label{sec:quiz}
The application analyzed in this paper is a quiz. It is described in
\ref{sec:aboutQuiz}, and in \ref{sec:implmentation} its implementation
is detailed.

\subsubsection{About The Quiz}
\label{sec:aboutQuiz}
The quiz is about dental health fact and also challenging\annSBW{loose that}. It can be
found at the URL \url{http://apps.facebook.com/zahniquiz}.
Each participants is asked five questions randomly selected
from a set of twenty questions. A question has four answers, of
which either one, two, three or each answer can be correct, thus
the kind of answers refers to the term \textit{multiple selection} \annSBW{der Satz is ganz im Arsch}.
A question is scored to be answered correctly, if the correct subset
was selected by the user, thus \annSBW{i.E. ... thus should be used seldom if at all} each correct and no incorrect answer
were selected. Each question answered correctly scores one, thus the
highest score is five. Figure \ref{fig:quiz} gives a screenshot of the quiz. 

The quiz is competitive. After the quiz is completed, users are told
their score, and in addition, they acknowledge how good they were in
comparison to other participants as well as to their 
friends. As shown in figure \ref{fig:solution}, for each question the
correct solution is given. A user can also invite friends to
participate. For this issue, profile pictures of a user's friends are
printed beyond the quiz. By clicking on such an image, an invitation
can be sent to the friend's Facebook profile. 


\subsubsection{Implementation}
\label{sec:implementation}
The studied application makes use of 
Facebook's php-\ac{sdk} and JavaScript-\ac{sdk}\footnote{http://developers.facebook.com/docs/}. It requires
permissions (see \ref{sec:auth-auth}) for \textit{user$\_$birthday} and
\textit{publish$\_$stream} \annSBW{erklÃ¤ren!}.
The questions and answers of the quiz are stored in a MySQL-database. PHP scripts
handle the creation of the quiz and
the Pear DB module \footnote{http://pear.php.net/} is used
for database queries.

The structure of the Facebook application is related to a
Model-view-controller architecture. \textit{Pear::DB} represents the
model, files stored in folder \textit{templates} act as view
(\textit{quizQuestion.php}, \textit{quiz.php},
\textit{quizResult.php}), and \textit{index.php} assumes the role of
the controller. \textit{library.php} contains a collection of
functions used by the various PHP scripts. \textit{facebook.php} and
scripts from \textit{facebook-sdk} folder are downloaded from
\url{https://github.com/facebook/php-sdk/} provide the functionality
of Facebook's PHP \ac{sdk}.

The view operates as follows: \textit{quiz.php} checks if the user
completed the quiz. If not, it prints the form, loads the styles and
includes \textit{quizQuestion.php} to print the questions. Otherwise, it
creates the page shown after the quiz is completed by printing a
statement commenting the user's score, and by providing users with 
the following options: Users can print their result into their news
stream and they can send invitations to their friends' Facebook
profiles. For both options, Facebook's JavaScript \ac{sdk} is
used. \textit{quizResult.php} contains the code to  
print the correct solution after the quiz is completed and is included
by \textit{quizQuestion.php}. 


\paragraph{Database schema}
\label{sec:database-schema}
The database queries are performed with PHP
pear\footnote{http://pear.php.net/}-package. The following tables exist:
\begin{itemize}
\item \textbf{User} - entries are created for each user who participates as
well as for each of a user's friends. A flag details if user
participated or not.
\item \textbf{Friends} - creates entries for each friendship found in
users' friend lists.
\item \textbf{Questions} - contains the questions of the quiz.
\item \textbf{Answers} - contains the possible answers and a flag to mark them
as correct or false.
\item \textbf{GivenAnswers} - stores each answer given by a user.
\item \textbf{UserScore} - stores the score user had in the quiz.
\item \textbf{CorrectAnsweredQuestions} - stores which questions were correct
answered by which user, and which were not.
\end{itemize}

\paragraph{Application flow}
\label{sec:application-flow}
When a user accesses the canvas page of the quiz, 
the \textit{OAuth Dialog} is started automatically by the
\textit{controller} \annSBW{vorhin haste noch gesagt FB macht das}. If authorization and authentication are completed
successfully, the user's basic data as well as the birthday are stored together with
a timestamp in the \textit{User} table. Column \textit{has-used-app} is set to 1. In
addition, each user's friends list is also stored in \textup{User} and
\textit{Friends} table, and for these \textit{users}, columns
\textit{has-used-app} is set to 0. 

% the quiz is created by randomly choosing
% five questions from the questions table and requiring the answers. To
% make the questions more attractive, the name of an image convenient to
% the questions topic is also stored in the questions table, and this
% image is placed on the left side of each question. Since multiple
% selection is possible, before the answers, which are also queried from
% the MySQL database, checkboxes are placed before each answer. 
Next, the quiz is created as mentioned in section
\ref{sec:implmenetation}.
After completion, its is evaluated the final score is computed. As
each answer ought to be stored and multiple selection of answers is \annSBW{multiple answers are}
possible, user answers have to be stored in  a multidimensional \annSBW{what?}. 

The given answers are then stored in table \textit{GivenAnswers}. In
table (\textit{correctAnsweredQuestions)} it is stored which questions
were correct or incorrect answered. This happens to spare complicated
evaluations based on the \textit{GivenAnswers} table later on.
Finally, an average score is computed and stored in the user table.

% In order to make the whole thing challenging, it
% is then computed how high the user's score is compared to the friends
% and to all the other users. 
% In addition, the correct solutions are given, and if a user knew the
% right answer, a green check is placed left to the question. Otherwise,
% a red cross is displayed at the same place. At least, the table with
% the friendships and table \textit{correctAnsweredQuestions} are used
% to identify friends  which answered the question correctly. Images of
% them are placed beyond each question's solution together with the
% information that those friends knew the right solution. 
% In the end, users get the chance to invite friends to the app to
% challenge them. For this reason, each friend's picture is added and
% user can click at them. On click, a pre-defined function from
% Facebook's Java Script \ac{sdk} is called to perform the invitation. 


\subsection{Data evaluation}
\label{sec:data-evaluation}
For data evaluation, a tool coded in PHP exists. It allows for output
of metrics as \ac{csv} and graphs in \ac{dot}
language\footnote{http://www.graphviz.org/Documentation.php}.
The data evaluated by the tool are taken from
 database tables the quiz also makes use of.

As mentioned in previous sections, the tool maintains an extract of
Facebook's social graph internally. This graph contains users' basic
information, friendships, etc. The internal graph is
extended by information from the quiz, such as if the user has
installed the application, and which score a user had. The internal graph
consists of instances of class \textit{user}, which have references
among each other representing friendships. The whole set of users is
maintained by \textit{main.php}, which contains a list of all the user
instances. 

Before the graph is created, user names can be made anonymous and the
results can be stored in the \textit{user} table to provide
reusability, too. User names are made anonymous by random selection of
a name from a list of popular baby names from 2009. The list of names was
taken from \url{http://www.ssa.gov/cgi-bin/popularnames.cgi}.   
For each gender, hundred names are stored in an array, and if the
gender is set, a name of same gender is chosen. Otherwise, the name is
taken randomly. The name of the person who spread the application
originally is always set to \textit{Alexandra}.

The tool can make a prognoses, which users spread the quiz. To
identify such users, the following idea is employed:
A user is supposed to have spread the app if he/she has
friends who also used the application and who belong to a \textit{new}
social network. Figure \ref{fig:newNW} gives an example.
The implementation is as follows: People who are supposed to have
spread the quiz are found by recursively checking if an user of 
the application has friends, who also used the application, and whose friends
also used the app, but are not in his/her list of friends, and also not in the list of the person
who originally spread the application. In this case, the corresponding
friend will be marked as a person who spread the application, and the
recursion starts by letting the friend become the analyzed user.
Since it is not clear, why a person started to use an application, the
script also allows for identification of users who have friends 
who also participated in the application. 

To let the tool output the graphs in \ac{dot} language, a parameter
has to be given to the tool via HTTP-Get method. The parameters are:
\verb|spreading|, \verb|tree|, \verb|friendsFilled| and
\verb|friendsScored|. If type \verb|spreading| is selected, only users
who participated in the quiz are shown. Users who are supposed to have
spread the application are red colored. Next to each user, the number
of friends, and the score the user yielded in the quiz are termed. If
type \verb|tree| is 
selected, all the users are shown, and nodes of users who participated
in the quiz are red colored. If type \verb|friendsFilled| is selected,
only users who participated in the quiz are considered and the
background color is set corresponding to the number of friends. A user
with the highest number of friends has background color black, the
person with the lowest number of friends has background color
white. If type \verb|friendsScored| is selected, the graph is created
analogous to type \verb|friendsFilled|, but the background color is
computed with respect to the score user had in the quiz averagely. 

To let the tool output \ac{csv}, the \verb|csv| parameter has to be
set to \verb|appUser| or to \verb|noAppUser|. 
If \verb|appUser| is selected, for each user the following metrics are
calculated: The number of friends, the number of friends who
participated in the application, and to how many people a person
probably spread the application.  If \verb|noAppUser| is selected, it
is only computed how many friends these user had who participated in
the quiz. It is returned, how many user had one friend, two friends,
and so on.

Besides the tool, some data are directly retrieved using database
queries. These data include the number of people in the user table, and
the number of people who participated in the application.


% Output options are a \ac{csv}-file containing metrics calculated from
% the internal social graph as well as various graphs in dot language, created
% from the internal social graph, too.
% Properties of
% user objects are in the style of the \textit{user}-table's properties, and a user's
% . The whole set of users is maintained by
% \textit{main.php}, where they are stored in an array. Class \textit{Graph}
% allows for output of various graphs in dot-language created from the
% internal social graph. 

\subsection{Start of the spreading process}
\label{sec:start-spre-proc}
The spreading process was started by the author who posted in the news
stream a German analogon to `please check out my new app!'. In
addition, a message on Facebook was sent to 17 friends asking them to
participate. 


\section{Results}
\label{sec:results}
A total of n=52 users participated in the quiz and 6311 users have been
stored in the user table. Data were collected from 15th of February to
15th of April. This section presents, which
characteristics these users have based on Facebook's insights and on
metrics computed with the tool discussed in section
\ref{sec:data-evaluation}. Then, the graphs detailing the spreading of
the application are shown.

\subsection{Characteristics Of the Participants}
\label{sec:characteristics}
In this section, characteristics about the users who participated in
the quiz are given. At first, characteristics retrieved from
Facebook's
\textit{Insights}\footnote{http://www.facebook.com/help/?search=insights}
are described, than, metrics collected from database and by the tool are given.

\subsubsection{Facebook's Insights}
Facebook Insights `provides Facebook Page owners and Facebook Platform
developers with metrics around their content.'\cite{facebookInsights}
These metrics are free and can be found in the \textit{My Apps}
section on the Facebook Developer Platform.
Facebook Insights considers for its metrics life time installation of an application
and events happened in a month. In case of the analyzed application,
Facebook had 50 Lifetime installed users for the quiz on 15th of April, 2011.

\paragraph{Age and gender}
\label{sec:age-gender}
$60 \%$ of the registered user are female, $40 \%$ of the participants
are male. Table \ref{tab:agegender} shows classification of the users
by age and gender. It can be obtained, that most users ( 68 \%) were at
the age of 25-34. Few participants ($8 \%$) were older, and about a
quarter (24 \%) were younger than 25.

\begin{center}
\begin{table}
\label{tab:agegender}
\begin{tabular}{l | c c c c c}
Gender\textbackslash Age  & 13-17 & 18-24 & 25-34 & 45-54 & 55+\\
\hline
female  & 2 \% & 18 \% & 36 \% & 4 \% & 0 \%\\
male & 0 \% & 4 \% & 32 \% & 2 \%  & 2 \\
\end{tabular}
\caption{Table shows classification of users by age and gender.}
\end{table}
\end{center}

\paragraph{Demography}
\label{sec:demographie}
Table \ref{tab:countries} details the origin of the users and table
\ref{tab:languages} the languages in which the participants chose
Facebook to occur.


\begin{center}
\begin{table}
\label{tab:countries}
\begin{tabular}{l | c }
Country  & Visitors \\
\hline
Germany  & 44 \\
United Kingdom & 2 \\
Israel & 1 \\
United States of America & 1 \\
Austria & 1 \\
\end{tabular}
\caption{Table shows where the users are from.}
\end{table}
\end{center}

\begin{center}
\begin{table}
\label{tab:languages}
\begin{tabular}{l | c }
Languages   & Visitors \\
\hline
German  & 34 \\
English (US) & 10 \\
English (UK) & 4 \\
Greek  & 1 \\
Italian & 1 \\
\end{tabular}
\caption{Languages of the participants.}
\end{table}
\end{center}

\paragraph{Requests}
The quiz allows for invitation of friends to participation by sending
requests. In the time of 18th of March to 8th of April, 4 requests
were sent, and one was accepted. In the month before, no friend
requests were accepted or ignored.

\subsubsection{Metrics collected by the tool}
\label{sec:tool-metrics}
As detailed in section \ref{sec:data-evaluation}, the tool allows for
output of metrics as \ac{csv}. Metrics about users who participated in
the quiz are given in table
\ref{tab:spread}. Table \ref{tab:nouser}
describes user who did not participate. Table \ref{tab:scorespread}
and \ref{tab:nospread} sum up metrics from table \ref{tab:spread}.

From the tables it can be derived that 34 users belonged to the
network of the author who started to spread the application. Thus, 18
application users came from other networks. 5 user did not have any
friends who also participated. On average, people except the author
and who had at least one \textit{app friend} had on average $2.5$ friends who also
used the application. People who probably spread the application to
one person had on average $3$ friends who used the quiz, too. People
who probably spread to two persons had on average $5.33$ friends who
used it, too. As it is shown in table \ref{tab:scorespread},
the average score of people who probably spread 
the application was higher for people who spread to more people. 
% Two tables also located in the addendum describe to how many
% other participants friendships existed (see table \ref{tab:spread} and
% \ref{tab:nospread}), and to how many people of a
% \textit{new} network the application was (probably) distributed by the
% user. $26$ participants were on average $2.54$ friends with other
% participants and those, who spread the application, seemed to have
% more connections to other people than those who did not.
% The average score of people connected to others was $3.02$. It was
% higher than the average score of people not connected to others ($2.41$).
% People not connected to further participants had fewer friends on average ($106.8$)
% than the connected participants ($138.83$).

Table \ref{tab:nouser} describes friends of participants, who did not
participate in the quiz. As each friend was stored, these people also
occur in table \textit{User} and \textit{Friends}. These friends of
application users may have received friend requests from other users,
and, they may have read about the application in their friends' news
stream.
It can be obtained, that 11 users exist having 4 or five friends who
use the application. The larger amount of people had fewer friends who
used the application.


\subsection{User Response}
\label{sec:user-response}
As mentioned in section \ref{sec:start-spre-proc}, 17 friends of the author were
directly invited to participate in the application. Each of them
installed the application, thus 17 friends of the author installed the
application for other reasons. The number of installations per day is
shown in figure \ref{fig:installations}, the data were exported from
Facebook Insights. A peak of new installations could be
found after the request to participate was posted in the news stream
on 3rd of March, 2011. The days after, further installations
happened. Six of the people who were asked directly to participate,
were not asked on 3rd of March, but afterwards. 7 people were asked
before.





\subsection{Graphs detailing the spreading of the quiz}
\label{sec:distribution-quiz}
In this section, graphs illustrating how the
application spread \annSBW{-s/-ed} are presented. The original user names collected
from Facebook were made anonymous
 (see section \ref{sec:data-evaluation}). Friendships are
represented by directed edges: If user A has user B in the friend list, an
arrow exists targeting user B.

Figure \ref{fig:allUsers} represents the graph that is created when
parameter \verb|tree| is set. In this case, each user stored in \textit{User}
table becomes a node, and friendships stored in table \textit{Friends}
are represented by directed edges. Names of users who participated in the quiz are distinguished by
red font color. The main purpose of this graph type is to
visualization of the whole spreading process.
The graph gives an imagination of how many 
people on Facebook could have read about the application in their 
news stream, or could have been invited by friends to join the
application. In addition, the graph shows how new networks are
reached and how dense the connections were in the network of the root
of the spreading process.


Figure \ref{fig:spreading} shows the graph that can be obtained when
parameter \verb|spreading| is set. In this case, only users who
participated in the quiz are considered. It can be obtained, that the
users Evelyn, Elli, Carlos, Charlotte, David, Sebastian,
Evan, Thomas, and Gabrielle have several connections among themselves,
thus they belong probably to a social network. Most people of this
network had a relatively high score. 
Further smaller networks exist. One among the users Sarah, two Evans,
and Brody, and another one among Julian, Khole, David, and Carson. In
these networks, the application spread to people of a new network. In
other cases, one new person who had a friend who used the application
started to use it as well. In
addition, some further people found the application in the application
directory on Facebook.
At least, it can be obtained that half of the people who spread the application
had less than hundred friends, which is less than the mean on
Facebook, i.e. 130 friends \cite{facebookStats}.

% In the addendum (section \ref{sec:addendum}), two further graphs are
% shown. In figure \ref{fig:friendsScored}, the background color
% represents a user's average score. User with a darker background had a
% higher score with those having a lighter background color. 
% Figure \ref{fig:friendsFilled} visualizes the amount of friends in the
% by giving users having many friends a dark and those having fewer
% friends a lighter background color. 



% \begin{center}
% \begin{table}
% \label{tab:coruser}
% \begin{tabular}{l | c c c}
% a & a & a & a \\

% \hline
% b & b & b & b
% \end{tabular}
% \caption{dummy}
% \end{table}
% \end{center}





\section{Discussion}
\label{sec:discussion}
From the results given in section \ref{sec:results} it can be followed
that mainly people belonging to the author's social network
participated in the application. Many of them came after the
application was solicited on Facebook's news stream, but in the days
after, further but smaller numbers of installations happened. As participation of friends was posted
in the news streams of the participants, friends could read about the
quiz few times. This may have made people curious about the application.
As it can be obtained in the graphs and in the
metrics, some users did not have friends who participated. Thus, they
came for another reason, may be due to interest in dentistry.

Most people who participated were in the age of twenty five to thirty
four. One reason may be that most of the author's friends are of that
age. As teenagers have less teeth affected with
caries than people older than twenty \cite{zahngesundheit}, the chosen
topic of the question can have increased the effect that mainly people
in the twenties and thirties participated.

From the metrics it can be concluded that the number of friends did
not to play a bigger role in the 
process of the application's spreading. The number of connections
to other users and the quiz score seemed to play a bigger 
role, as it is mentioned in section \ref{sec:tool-metrics}. 
In addition, a worse score made people unlikely
to spread the application, just one person with a score less than 3
did so. Thus, people with a higher score (on average $3.11$, median $3.32$) are
supposed to have distributed the application. Indeed, some people who
had four or five friends who participated in the application did not
install the application.


\section{Conclusion and Outlook}
\label{sec:conclusion}
This research indicates, that their is not just one default pattern
after which applications spread on Facebook. Instead, several facts
seem to influence this effect. On the one hand, the topic of an
application and an applications type hit the interest of specific
people. Furthermore, there are often 

. Oftentimes, people say that they don't want to
make a worse impression on Facebook, and this is also reflected in the
fact, that only people who yield higher scores in the quiz also
distributed to their friends. In the environment analyzed, dense
networks with few participants, i.e. in networks in which people know
each other, made  further members of their network very likely to join
the application. Indeed, the number of friends did not play a role in
making people likely to spread the application.


In order to get more reliability towards the processes of spreading
of applications on Facebook, more applications must be analyzed.
Future research may consider, how patterns change with respect
to users' age, and if further characteristics can be identified. In
case of larger applications, it could be studied, if turning points
or intervals exist, which - when exceeded - make users significantly
more likely to join the application.





\include{acronym} % load acronyms
%% \section{}
%% \label{}

%% References
%%
%% Following citation commands can be used in the body text:
%% Usage of \cite is as follows:
%%   \cite{key}          ==>>  [#]
%%   \cite[chap. 2]{key} ==>>  [#, chap. 2]
%%   \citet{key}         ==>>  Author [#]

%% References with bibTeX database:

\bibliographystyle{elsarticle-harv}
\bibliography{literature.bib}


%% Authors are advised to submit their bibtex database files. They are
%% requested to list a bibtex style file in the manuscript if they do
%% not want to use model1-num-names.bst.

%% References without bibTeX database:

% \begin{thebibliography}{00}

%% \bibitem must have the following form:
%%   \bibitem{key}...
%%

% \bibitem{}

% \end{thebibliography}

\newpage
\section{Tables and Figures}
\label{sec:addendum}

\begin{figure}
  \includegraphics[height=3in]{../img/fbquiz.png}
 \caption{The quiz.}
\label{fig:quiz}
\end{figure}


\begin{figure}
  \includegraphics[width=3.5in]{../img/fbsolution.png}
  \caption{Solution of a question.}
\label{fig:solution}
\end{figure}

\begin{figure}
  \includegraphics[height=1.5in]{../img/newNW.png}
 \caption{This figure emphasizes user b who connects the existing
   network of users to a new social networks with
   red border.}
\label{fig:newNW}
\end{figure}


\begin{figure}
  \includegraphics[width=5.2in]{../img/tree2.png}
\caption{Figure shows all users stored in the database. Users who
  participated have a red text color.}
\label{fig:allUsers}
\end{figure}

\begin{figure}
  \includegraphics[width=5in]{../img/spreading5.png}
\caption{Figure shows all users stored in the database. Users who
  participated have a red text color.}
\label{fig:spreading}
\end{figure}

\begin{figure}
  \includegraphics[width=5in]{../img/installations.png}
\caption{Figure shows all users stored in the database. Users who
  participated have a red text color.}
\label{fig:installations}
\end{figure}



% \begin{figure}
%   \includegraphics[width=3.5in]{../img/fbinvite.png}
%   \caption{This screenshot shows how friends can be invited.}
% \label{fig:invite}
% \end{figure}

\begin{figure}
  \includegraphics[width=5in]{../img/friendsScored.png}
\caption{Figure shows all users stored in the database. Users who
  participated have a red text color.}
\label{fig:friendsScored}
\end{figure}

\begin{figure}
  \includegraphics[width=5in]{../img/friendsFilled.png}
\caption{Figure shows all users stored in the database. Users who
  participated have a red text color.}
\label{fig:friendsFilled}
\end{figure}



 \begin{table}
 \label{tab:spread}
 \begin{tabular}{ c c c c c}
Anon. Name&Friends&App-friends&Spread App to&Average Score	\\
Alexandra & 133& 34& 34 & 4.4625 \\
Evan & 97& 1& 0 & 3.33333 \\
Justin & 90& 2& 0 & 1.28571 \\
Tristan & 332& 2& 0 & 3 \\
Thomas & 396& 3& 0 & 4 \\
Jose & 233& 1& 0 & 4 \\
David & 322& 6& 0 & 1.5 \\
Gianna & 63& 3& 1 & 4 \\
Makayla & 79& 1& 0 & 3 \\
Connor & 102& 3& 0 & 0 \\
Ethan & 91& 4& 1 & 1 \\
Isabelle & 53& 1& 0 & 1 \\
Gavin & 89& 1& 0 & 2 \\
Caleb & 128& 3& 0 & 4 \\
Sarah & 151& 5& 3 & 3 \\
Emma & 72& 1& 0 & 4 \\
Gabrielle & 135& 4& 2 & 3.63636 \\
David & 254& 3& 2 & 4 \\
Emily & 220& 5& 0 & 3 \\
Victoria & 63& 2& 0 & 2 \\
Brian & 126& 2& 0 & 4 \\
Jose & 127& 3& 0 & 3 \\
Thomas & 186& 4& 0 & 4 \\
Evelyn & 42& 5& 0 & 3 \\
Paige & 76& 2& 0 & 1 \\
Hannah & 264& 2& 0 & 1 \\
Charlotte & 445& 5& 0 & 3 \\
Elizabeth & 35& 1& 0 & 3 \\
Carson & 153& 3& 1 & 3 \\
Carson & 20& 2& 1 & 3 \\
Nathan & 121& 1& 0 & 4 \\
Eli & 11& 9& 2 & 4.23077 \\
Isaac & 290& 1& 0 & 1 \\
Alexandra & 130& 1& 0 & 3 \\
Gabriel & 67& 1& 0 & 2 \\
Paige & 16& 1& 0 & 4 \\
David & 50& 1& 0 & 4 \\
Julian & 207& 2& 0 & 2 \\
Carlos & 3 & 3 & 0 & 4.75 \\
Evan & 74& 3& 0 & 4.5 \\
Sebastian & 47& 3& 0 & 4.41667 \\
Xavier & 80& 0& 0 & 4 \\
Evan & 157& 2& 0 & 3 \\
Brody & 136& 2& 0 & 3 \\
Luis & 60& 1& 0 & 0\\
Allison & 13& 0& 0 & 2.5 \\
Tyler & 229& 0& 0 & 0\\
Emily & 53& 0& 0 & 0\\
Khloe & 78& 1& 0 & 4 \\
Katelyn & 167& 1& 0 & 2 \\
Kaitlyn & 10& 1& 0 & 3 \\
Eva & 272& 0& 0 & 4
\end{tabular}
\caption{Table details metrics about users who participated in the
  application. Friends detail the number of friends a user had,
  App-friends is the number of friends who also participated in the
  quiz, Spread App To details to how many people a user probably
  spread the application, and Average Score details to the score the
  user averagely had in the quiz. The names were made anonymous.}
\end{table}




 \begin{center}
 \begin{table}
 \label{tab:nospread}
 \begin{tabular}{ c c}
Number of app friends & Occurrences \\
\hline
0 app friends & 5 \\
1 app friend & 17 \\
2 app friends & 10 \\
3 app friends & 10 \\
4 app friends & 3 \\
5 app friends & 3\\
6 app friends & 2\\
9 app friends & 1\\
34 app friends & 1 \\
\end{tabular}
\caption{Table sums up metrics from table \ref{tab: spread}. It
  details how many users had 0 friends who also participated in the
  application, one friend, and so further.}
\end{table}
\end{center}


\begin{table}
\label{tab:scorespread}
\begin{tabular}{c c c}
Spread to & Concerned People & Average score \\ 
1&	4 & 2.75 \\
2&	3&3.96 \\
3&	1&3 \\
\end{tabular}
\caption{Table details the average score of people who spread the
  application to one, two, or three users, as well as the number of
  concerned people.}
\end{table}

\begin{table}
\label{tab:nouser}
\begin{tabular}{c c}
Number of friends & Frequency \\
1& 5150\\
2& 240\\
3& 55\\
4& 6\\
5& 5\\
\end{tabular}
\caption{Table details how many friends user had, who did not
  participate in the application.}
\end{table}



\end{document}

%%
%% End of file `elsarticle-template-1-num.tex'.

%%% Local Variables: 
%%% mode: latex
%%% TeX-master: t
%%% End: 
